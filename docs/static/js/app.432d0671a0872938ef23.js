webpackJsonp([1],{BZ4f:function(e,a){},Dc9r:function(e,a){},K6VE:function(e,a){},NHnr:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l=t("MVMM"),n=t("5VXh"),i=t.n(n),r=(t("K6VE"),{render:function(){var e=this.$createElement,a=this._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},staticRenderFns:[]});var p=t("Z0/y")({name:"App"},r,!1,function(e){t("WVyT")},null,null).exports,o=t("zO6J"),s=-1!=="datahunter".indexOf(location.host)?"/admin":"http://dangbao.datahunter.cn/admin/",m={rows:15},c=t("KH7x"),u=t.n(c),d={data:function(){return{openeds:"",menus:[{name:"用户画像",datas:[{api:"catlist?type=portrait_media",value:"用户画像日报列表"},{api:"maplist?type=sex",value:"性别"},{api:"maplist?type=age",value:"年龄"},{api:"maplist?type=hobby",value:"偏好"},{api:"maplist?type=province",value:"地域"},{api:"maplist?type=dev",value:"终端"},{api:"maplist?type=os",value:"操作系统"}]},{name:"党报追踪",datas:[{api:"newslist?type=news_paper",value:"报纸"},{api:"maplist?type=word",value:"词云"},{api:"maplist?type=paper_level",value:"媒体分类"},{api:"newslist?type=news_top",value:"头条"},{api:"newslist?type=track_news",value:"头版热榜"}]},{name:"新闻动态",datas:[{api:"maplist?type=web_article",value:"网站"},{api:"maplist?type=weibo_article",value:"微博"},{api:"maplist?type=wechat_article",value:"微信"},{api:"maplist?type=app_article",value:"app"},{api:"maplist?type=content_reach_monitor",value:"内容推荐"},{api:"maplist?type=content_input_monitor",value:"内容入库"},{api:"newslist?type=content_real_time",value:"实时内容"}]},{name:"入驻党媒",datas:[{api:"catlist?type=party_media_data",value:"入驻媒体"},{api:"catlist?type=media_position",value:"媒体地图"}]},{name:"内容推荐",datas:[{api:"maplist?type=recommend",value:"推荐量-曲线"},{api:"maplist?type=read",value:"阅读量-曲线"},{api:"catlist?type=read_recommend_number",value:"推荐量和阅读量总数"},{api:"newslist?type=recommend_rank",value:"推荐风云榜"},{api:"newslist?type=read_rank",value:"阅读风云榜"},{api:"catlist?type=media_30",value:"近30天媒体列表"},{api:"maplist?type=day_30",value:"近30天-曲线"}]},{name:"落地渠道",datas:[{api:"maplist?type=recommend_panel",value:"推荐量-曲线"},{api:"maplist?type=read_panel",value:"阅读量-曲线"},{api:"catlist?type=recommend_read_number",value:"推荐量和阅读量总数"},{api:"maplist?type=wx_rank",value:"微信影响力"},{api:"maplist?type=wb_rank",value:"微博影响力"},{api:"catlist?type=media_panel",value:"媒体列表"}]}],updateState:0}},methods:{menuclick:function(e,a){this.$router.push({name:"appmain",params:{api:e.api,page:1}});var t=u()(a,2),l=t[0];t[1];this.$emit("menuClick",e.api,[this.menus[l].name,e])}},created:function(){var e=this,a=this.$route.params.api;this.menus.forEach(function(t,l){t.datas.forEach(function(t,n){t.api===a&&(e.openeds=""+l,e.active=l+"-"+n)})})}},b={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.active,"default-openeds":[e.openeds]}},e._l(e.menus,function(a,l){return t("el-submenu",{key:l,attrs:{index:""+l}},[t("template",{slot:"title"},[e._v(e._s(a.name))]),e._v(" "),e._l(a.datas,function(a,n){return t("el-menu-item",{key:n,attrs:{index:l+"-"+n},on:{click:function(t){e.menuclick(a,[l,n])}}},[e._v("\n      "+e._s(a.value)+"\n    ")])})],2)}))},staticRenderFns:[]};var _=t("Z0/y")(d,b,!1,function(e){t("BZ4f")},null,null).exports,v=t("3cXf"),g=t.n(v),f=t("4YfN"),h=t.n(f),y={track_news:[{prop:"media",label:"名称",width:140},{prop:"title",label:"头条-新闻标题"}],news_paper:[{prop:"paper_name",label:"媒体名称",width:140},{prop:"image",label:"图片地址"}],news_top:[{prop:"title",label:"新闻标题"},{prop:"number",label:"头版个数",width:140}],word:[{prop:"app_name",label:"媒体来源",readonly:!0},{prop:"name",label:"词云名称"},{prop:"number",label:"个数",width:140}],paper_level:[{prop:"name",label:"名称"},{prop:"number",label:"个数",width:140}],portrait_media:[{prop:"name",label:"名称"}],sex:[{prop:"app_name",label:"媒体来源",readonly:!0},{prop:"name",label:"性别"},{prop:"number",label:"数值"}],age:[{prop:"app_name",label:"媒体来源",readonly:!0},{prop:"name",label:"年龄"},{prop:"number",label:"数值"}],hobby:[{prop:"app_name",label:"媒体来源",readonly:!0},{prop:"name",label:"偏好"},{prop:"number",label:"数值"}],province:[{prop:"app_name",label:"媒体来源",readonly:!0},{prop:"name",label:"省份"},{prop:"number",label:"数值"}],dev:[{prop:"app_name",label:"媒体来源",readonly:!0},{prop:"name",label:"终端"},{prop:"number",label:"数值"}],os:[{prop:"app_name",label:"媒体来源",readonly:!0},{prop:"name",label:"操作系统"},{prop:"number",label:"数值"}],web_article:[{prop:"name",label:"日期"},{prop:"number",label:"数值"}],weibo_article:[{prop:"name",label:"日期"},{prop:"number",label:"数值"}],wechat_article:[{prop:"name",label:"日期"},{prop:"number",label:"数值"}],app_article:[{prop:"name",label:"日期"},{prop:"number",label:"数值"}],content_reach_monitor:[{prop:"name",label:"日期"},{prop:"number",label:"数值"}],content_input_monitor:[{prop:"name",label:"名称"},{prop:"number",label:"数值"}],content_real_time:[{prop:"title",label:"名称"},{prop:"logo",label:"logo"},{prop:"date",label:"日期"},{prop:"url",label:"地址"}],party_media_data:[{prop:"total",label:"入驻总数"},{prop:"cover",label:"分布省市总数"},{prop:"fusion",label:"开通融合号总数"}],media_position:[{prop:"city",label:"城市",width:140},{prop:"media",label:"媒体名称",width:140},{prop:"logo",label:"logo"}],recommend:[{prop:"name",label:"时间"},{prop:"number",label:"值"}],read:[{prop:"name",label:"时间"},{prop:"number",label:"数值0"},{prop:"number1",label:"数值1"}],read_recommend_number:[{prop:"read_number",label:"阅读总量"},{prop:"recommend_number",label:"推荐总量"}],recommend_rank:[{prop:"title",label:"标题"},{prop:"url",label:"地址"},{prop:"number",label:"推荐量"}],read_rank:[{prop:"title",label:"标题"},{prop:"url",label:"地址"},{prop:"number",label:"阅读量"}],media_30:[{prop:"name",label:"媒体名称"}],day_30:[{prop:"app_name",label:"媒体来源",readonly:!0},{prop:"name",label:"日期"},{prop:"number",label:"数值"}],recommend_panel:[{prop:"app_name",label:"媒体来源",readonly:!0},{prop:"name",label:"日期"},{prop:"number",label:"数值"}],read_panel:[{prop:"app_name",label:"媒体来源",readonly:!0},{prop:"name",label:"日期"},{prop:"number",label:"数值0"},{prop:"number1",label:"数值1"}],media_panel:[{prop:"name",label:"媒体名称"},{prop:"url",label:"logo"}],recommend_read_number:[{prop:"app_name",label:"媒体来源",readonly:!0},{prop:"read_number",label:"阅读量"},{prop:"recommend_number",label:"推荐量"}],wx_rank:[{prop:"name",label:"媒体名称"},{prop:"number",label:"数据量"}],wb_rank:[{prop:"name",label:"媒体名称"},{prop:"number",label:"数据量"}]},w=["portrait_media","paper_level","news_top","news_paper","web_article","weibo_article","wechat_article","app_article","content_real_time","content_reach_monitor","content_input_monitor","media_position","read_recommend_number","recommend_rank","media_30","media_panel","wx_rank","wb_rank"],x=["read","read_panel"],k={data:function(){return{tableData:[],dialogFormVisible:!1,dialogVisible:!1,form:{},formLabelWidth:"120px",showview:y,currentPage:this.$route.params.page-0,totalPage:1,pageSize:m.rows,ids:[],table:"",loading:!0,showbtn:!1,numberType:-1,selection:!1}},props:["api"],methods:{rowClick:function(e,a,t){var l=this,n=[{type:"news_paper",src:"image"},{type:"media_position",src:"logo"},{type:"media_panel",src:"url"}],i=n.map(function(e){return e.type}).indexOf(e.type);if(-1!==i&&"操作"!==t.label){var r=e[n[i].src],p=new Image;p.onload=function(){l.$alert('<img src="'+r+'" style="width:100%;" />',{dangerouslyUseHTMLString:!0,closeOnClickModal:!0,closeOnPressEscape:!0})},p.onerror=function(){l.$message.error("图片链接失效")},p.src=r}},handleSelectionChange:function(e){this.ids=e.map(function(e){return e._id}),this.table=e[0]?e[0].table:""},messageError:function(e){this.$createElement;this.$message.error(e)},getList:function(e,a){var t=this;this.loading=!0,a&&this.$router.push({name:"appmain",params:{api:e,page:a}});var l=a?h()({page:a},m):h()({},m,{page:this.$route.params.page}),n=e?s+e:s+this.$route.params.api;$.ajax({url:n,data:l,success:function(e){t.loading=!1,t.currentPage=e.msg.page,t.totalPage=e.msg.total,t.tableData=e.msg.list},error:function(e){t.loading=!1,t.messageError("服务器繁忙，请稍后再试")}})},editDialog:function(e){this.dialogFormVisible=!0,this.form=e},removeDialog:function(e){e?(this.dialogVisible=!0,this.form=e):this.ids.length?this.dialogVisible=!0:this.messageError("请选择要删除的条目")},edit:function(){var e=this;$.ajax({type:"post",url:s+"save",data:this.form,success:function(a){"ok"===a.msg?(e.dialogFormVisible=!1,e.$message({message:"修改成功",type:"success"})):e.messageError(a.msg)}})},remove:function(){var e=this,a=this.form._id?[this.form._id]:this.ids,t=this.form.table||this.table;$.ajax({type:"post",url:s+"remove",data:g()({ids:a,table:t}),success:function(a){"ok"===a.msg?(e.dialogVisible=!1,e.$message({message:"删除成功",type:"success"}),e.getList()):e.messageError(a.msg)}})},setUpdateBtn:function(e){var a=this;this.updateNow=-1!==w.indexOf(e.split("type=")[1]),this.selection=-1!==x.indexOf(e.split("type=")[1]);var t=x.indexOf(e.split("type=")[1]);if(-1!==t){var l=["content","local"][t];$.ajax({url:s+"readinfo",data:{cat:l},success:function(e){200===e.code?a.numberType=!e.msg:a.$message({message:"服务器异常，请稍后再试",type:"error"})}})}},refresh:function(){var e=this;$.ajax({type:"post",url:s+"fresh",data:{type:this.api.split("type=")[1]},success:function(a){"ok"===a.msg?(e.$message({message:"数据更新成功",type:"success"}),e.getList()):e.messageError(a.msg)}})},numberChange:function(e){var a=this,t=this.$route.params.api,l=["content","local"][x.indexOf(t.split("type=")[1])];$.post(s+"changeread?type="+(e?0:1)+"&cat="+l,function(e){200!==e.code&&(a.numberType=!a.numberType,a.$message({message:"服务器异常，请稍后再试",type:"error"}))})}},watch:{api:function(e){this.getList(e),this.setUpdateBtn(e),this.currentPage=1}},created:function(){var e=this.$route.params.api;this.getList(e),this.setUpdateBtn(e)}},C={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-container",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[t("el-collapse-transition",[t("div",{staticClass:"transition-box",staticStyle:{position:"relative",padding:"10px"}},[t("el-switch",{directives:[{name:"show",rawName:"v-show",value:e.selection,expression:"selection"}],attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"数值0","inactive-text":"数值1"},on:{change:e.numberChange},model:{value:e.numberType,callback:function(a){e.numberType=a},expression:"numberType"}}),e._v(" "),t("el-button",{directives:[{name:"show",rawName:"v-show",value:e.updateNow,expression:"updateNow"}],attrs:{type:"primary"},on:{click:function(a){e.refresh()}}},[t("i",{staticClass:"el-icon-refresh"}),e._v(" 立即更新")]),e._v(" "),t("el-button",{directives:[{name:"show",rawName:"v-show",value:e.ids.length,expression:"ids.length"}],attrs:{type:"danger"},on:{click:function(a){e.removeDialog()}}},[t("i",{staticClass:"el-icon-delete"}),e._v(" 批量删除")])],1)]),e._v(" "),t("el-main",[t("el-table",{attrs:{data:e.tableData,border:""},on:{"selection-change":e.handleSelectionChange,"row-click":e.rowClick}},[t("el-table-column",{attrs:{type:"selection",width:"40"}}),e._v(" "),e._l(e.showview[e.api.split("type=")[1]]||[],function(e,a){return[t("el-table-column",{key:a,attrs:{prop:e.prop,label:e.label,width:e.width}})]}),e._v(" "),t("el-table-column",{attrs:{prop:"",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){e.editDialog(a.row)}}},[e._v("编辑")]),e._v(" "),t("el-button",{attrs:{type:"text"},on:{click:function(t){e.removeDialog(a.row)}}},[e._v("删除")])]}}])})],2),e._v(" "),t("el-dialog",{attrs:{title:"编辑",visible:e.dialogFormVisible},on:{"update:visible":function(a){e.dialogFormVisible=a}}},[t("el-form",{attrs:{model:e.form}},e._l(e.showview[e.api.split("type=")[1]]||[],function(a,l){return t("el-form-item",{key:l,attrs:{label:a.label,"label-width":e.formLabelWidth}},[t("el-input",{attrs:{readonly:a.readonly,"auto-complete":"off"},model:{value:e.form[a.prop],callback:function(t){e.$set(e.form,a.prop,t)},expression:"form[o.prop]"}})],1)})),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(a){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.edit}},[e._v("确 定")])],1)],1),e._v(" "),t("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"20%"},on:{"update:visible":function(a){e.dialogVisible=a}}},[t("span",[e._v("确定要删除吗？")]),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(a){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.remove}},[e._v("确 定")])],1)])],1),e._v(" "),t("el-footer",{directives:[{name:"show",rawName:"v-show",value:e.totalPage/e.pageSize>1,expression:"totalPage / pageSize > 1"}]},[t("div",{staticStyle:{"margin-top":"20px"}},[t("el-pagination",{attrs:{small:!0,layout:"prev, pager, next",total:e.totalPage,"page-size":e.pageSize,"current-page":e.currentPage},on:{"update:currentPage":function(a){e.currentPage=a},"current-change":function(a){e.getList(e.$route.params.api,arguments[0])}}})],1)])],1)},staticRenderFns:[]},T={name:"appmain",data:function(){return{api:this.$route.params.api,updateTiming:-1}},methods:{menuClick:function(e,a){this.api=e},timingChange:function(e){var a=this;$.post(s+"task?type="+(e?0:1),function(e){200!==e.code&&(a.updateTiming=!a.updateTiming,a.$message({message:"服务器异常，请稍后再试",type:"error"}))})}},created:function(){var e=this;$.get(s+"taskinfo",function(a){e.updateTiming=1!==a.msg})},components:{Menu:_,Main:t("Z0/y")(k,C,!1,null,null,null).exports}},V={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-container",{staticStyle:{height:"100%",border:"1px solid #eee"}},[t("el-container",[t("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)",overflow:"auto"},attrs:{width:"200px"}},[-1!==e.updateTiming?t("div",{staticClass:"transition-box",staticStyle:{padding:"20px","box-shadow":"0 0 3px #ccc","margin-bottom":"10px",background:"#fff"}},[t("p",{staticStyle:{"line-height":"30px","font-size":"14px","margin-bottom":"10px"}},[e._v("定时更新")]),e._v(" "),t("el-switch",{attrs:{"active-color":"#13ce66","active-text":"开启","inactive-text":"关闭"},on:{change:e.timingChange},model:{value:e.updateTiming,callback:function(a){e.updateTiming=a},expression:"updateTiming"}})],1):e._e(),e._v(" "),t("Menu",{on:{menuClick:e.menuClick}})],1),e._v(" "),t("Main",{attrs:{api:e.api}})],1)],1)},staticRenderFns:[]};var E=t("Z0/y")(T,V,!1,function(e){t("Dc9r")},null,null).exports,S={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]},P=t("Z0/y")({beforeRouteEnter:function(e,a,t){t({replace:!0,name:"appmain",params:{api:"catlist?type=portrait_media",page:1}})}},S,!1,null,null,null).exports;l.default.use(o.a);var F=new o.a({routes:[{path:"/:api/:page",name:"appmain",component:E},{path:"/",name:"index",component:P}]});l.default.use(i.a,{size:"small"}),l.default.config.productionTip=!1,new l.default({el:"#app",router:F,components:{App:p},template:"<App/>"})},WVyT:function(e,a){}},["NHnr"]);
//# sourceMappingURL=app.432d0671a0872938ef23.js.map